{% extends "core/base.html" %}
{% block main %}
<div class="container mx-auto px-4 py-8">

    <!-- Header -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800">Order Details</h2>
       
    </div>

    <!-- Order Info Card -->
    <div class="bg-white shadow-md rounded-xl p-6 mb-6 border border-gray-200">
        <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
            <h3 class="text-lg font-semibold text-gray-800">
                Order <span class="text-orange-500">#{{ order.order_number }}</span>
            </h3>
            <span class="px-4 py-1 text-sm font-medium rounded-full 
                {% if order.status == 'Completed' %} bg-green-100 text-green-600
                {% elif order.status == 'Cancelled' %} bg-red-100 text-red-600
                {% else %} bg-yellow-100 text-yellow-700 {% endif %}">
                {{ order.status }}
            </span>
        </div>
        <div class="mt-3 text-sm text-gray-600">
            <p>Placed on: <span class="font-medium">{{ order.created_at|date:"M d, Y H:i" }}</span></p>
            <p>Payment Method: <span class="font-medium">{{ order.payment.payment_method }}</span></p>
        </div>
    </div>

    <!-- Ordered Products -->
    <div class="bg-white shadow-md rounded-xl p-6 mb-6 border border-gray-200">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Items in this Order</h3>
        <div class="space-y-4">
            {% for item in order_products %}
            <div class="flex items-center justify-between pb-3">
                <div class="flex items-center space-x-4">
                    <!-- ✅ Fixed image size -->
                   <img src="{{ item.product.Product_image.url }}" 
                        alt="{{ item.product.product_name }}" 
                        class="w-16 h-16 object-contain rounded-md border border-gray-300 bg-gray-50 p-1">
                    <div>
                        <h4 class="font-medium text-gray-800">{{ item.product.product_name }}</h4>
                        <p class="text-sm text-gray-500">Qty: {{ item.quantity }}</p>
                    </div>
                </div>
                <p class="font-semibold text-gray-900">₹{{ item.product_price|floatformat:2 }}</p>
            </div>
            {% empty %}
            <p class="text-gray-500 text-sm">No items found in this order.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Summary -->
    <div class="bg-white shadow-md rounded-xl p-6 border border-gray-200">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Order Summary</h3>
        <div class="space-y-2 text-sm text-gray-700">
            <div class="flex justify-between">
                <span>Subtotal</span>
                <span>₹{{ order.order_total|add:order.tax|floatformat:2 }}</span>
            </div>
            <div class="flex justify-between">
                <span>Tax</span>
                <span>₹{{ order.tax }}</span>
            </div>
            <div class="flex justify-between">
                <span>Shipping</span>
                <span>₹{{ order.shipping_charge }}</span>
            </div>
            <div class="border-t pt-2 flex justify-between text-lg font-bold text-gray-900">
                <span>Total</span>
                <span>₹{{ order.order_total }}</span>
            </div>
        </div>
    </div>
    <br>
     <a href="{% url 'invoice_view' order.id %}" 
           class="mt-3 md:mt-0 inline-flex items-center px-5 py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-lg shadow transition">
            ⬇ Download Invoice (PDF)
        </a>
</div>
{% endblock %}
